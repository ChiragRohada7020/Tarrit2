<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="{{url_for('static',filename='./dist/Tailwindcss/output.css')}}"
    />
  </head>
  <body class="w-full bg-gray-100 ">
    <div class="md:flex ">
      <div class="md:hidden" id="nav_img">
        <div class="w-full flex p-5">
          <img
            onclick="nav_img()"
            class="w-10 mt-2 hover:cursor-pointer"
            src="
          https://friconix.com/png/fi-xwluxx-three-bars-wide.png"
            alt=""
          />
        </div>
      </div>
      <div class="hidden md:block" id="nav_bar">

      
      <nav class="fixed md:block bg-gray-50 h-full ">
        <div
          class="items-center justify-center text-4xl p-5 font-bold whitespace-nowrap hover:no-underline focus:no-underline"
        >
          <h1 class="">Ta<span class="text-green-400">arit</span></h1>
        </div>
        <div>
        <div>
          <aside class="w-64" aria-label="Sidebar">
            <div
              class="px-3 py-4 overflow-y-auto rounded  dark:bg-gray-800"
            >
              <ul class="space-y-2">
                <li>
                  <a
                    href="{{ url_for('admin.admin_index') }}"
                    class="flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <svg
                      aria-hidden="true"
                      class="w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"></path>
                      <path
                        d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"
                      ></path>
                    </svg>
                    <span class="ml-3">Dashboard</span>
                  </a>
                </li>
               
                <li>
                  <a
                    href="{{ url_for('admin.user_accident') }}"
                    class="flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <svg
                      aria-hidden="true"
                      class="flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M8.707 7.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l2-2a1 1 0 00-1.414-1.414L11 7.586V3a1 1 0 10-2 0v4.586l-.293-.293z"
                      ></path>
                      <path
                        d="M3 5a2 2 0 012-2h1a1 1 0 010 2H5v7h2l1 2h4l1-2h2V5h-1a1 1 0 110-2h1a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5z"
                      ></path>
                    </svg>
                    <span class="flex-1 ml-3 whitespace-nowrap">Inbox</span>
                    <span id="accident"
                      class="inline-flex items-center justify-center w-3 h-3 p-3 ml-3 text-sm font-medium bg-blue-100 text-blue-800 rounded-full dark:bg-blue-900 dark:text-blue-300"
                      >0</span
                    >
                  </a>
                </li>
                <li>
                  <a
                    href="{{ url_for('admin.admin_user_data') }}"
                    class="flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <svg
                      aria-hidden="true"
                      class="flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                        clip-rule="evenodd"
                      ></path>
                    </svg>
                    <span class="flex-1 ml-3 whitespace-nowrap">Users</span>
                  </a>
                </li>
                <li>
                  <a
                    href="{{ url_for('admin.admin_data') }}"
                    class="flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <svg
                      aria-hidden="true"
                      class="flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z"
                        clip-rule="evenodd"
                      ></path>
                    </svg>
                    <span class="flex-1 ml-3 whitespace-nowrap">Data</span>
                  </a>
                </li>
                <li>
                  <a
                    href="{{ url_for('admin.admin_logout') }}"
                    class="flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <svg
                      aria-hidden="true"
                      class="flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z"
                        clip-rule="evenodd"
                      ></path>
                    </svg>
                    <span class="flex-1 ml-3 whitespace-nowrap">LogOut</span>
                  </a>
                </li>
                <li>
                  <a
                    href="{{ url_for('admin.admin_login') }}"
                    class="flex items-center p-2 text-base font-normal text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <svg
                      aria-hidden="true"
                      class="flex-shrink-0 w-6 h-6 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 9v-1h5v2H5a1 1 0 01-1-1zm7 1h4a1 1 0 001-1v-1h-5v2zm0-4h5V8h-5v2zM9 8H4v2h5V8z"
                        clip-rule="evenodd"
                      ></path>
                    </svg>
                    <span class="flex-1 ml-3 whitespace-nowrap">Sign Up</span>
                  </a>
                </li>
              </ul>
            </div>
          </aside>
        </div>
      </nav>
    </div>
      <div class="hidden" id="user_data">
        <div class="text-white my-10 flex justify-center w-full">
          <div class="overflow-hidden bg-white shadow sm:rounded-lg w-3/4">
            <div class="px-4 py-5 sm:px-6">
              <h3 class="text-lg font-medium leading-6 text-gray-900">
                Applicant Information
              </h3>
              <p class="mt-1 max-w-2xl text-sm text-gray-500">
                Personal details and application.
              </p>
            </div>
            <div class="border-t border-gray-200">
              <dl id="full_detail">
                <div
                  class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
                >
                  <dt class="text-sm font-medium text-gray-500">Full name</dt>
                  <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0">
                    Margot Foster
                  </dd>
                </div>
                <div
                  class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
                >
                  <dt class="text-sm font-medium text-gray-500">
                    Mobile Number
                  </dt>
                  <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0">
                    Backend Developer
                  </dd>
                </div>
                <div
                  class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
                >
                  <dt class="text-sm font-medium text-gray-500">
                    Email address
                  </dt>
                  <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0">
                    margotfoster@example.com
                  </dd>
                </div>

                <div
                  class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
                >
                  <dt class="text-sm font-medium text-gray-500">Address</dt>
                  <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0">
                    Fugiat ipsum ipsum deserunt culpa aute sint do nostrud anim
                    incididunt cillum culpa consequat. Excepteur qui ipsum
                    aliquip consequat sint. Sit id mollit nulla mollit nostrud
                    in ea officia proident. Irure nostrud pariatur mollit ad
                    adipisicing reprehenderit deserunt qui eu.
                  </dd>
                </div>
                <div
                  class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
                >
                  <dt class="text-sm font-medium text-gray-500">Attachments</dt>
                  <dd class="mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0">
                    <ul
                      role="list"
                      class="divide-y divide-gray-200 rounded-md border border-gray-200"
                    >
                      <li
                        class="flex items-center justify-between py-3 pl-3 pr-4 text-sm"
                      >
                        <div class="flex w-0 flex-1 items-center">
                          <!-- Heroicon name: mini/paper-clip -->
                          <svg
                            class="h-5 w-5 flex-shrink-0 text-gray-400"
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 20 20"
                            fill="currentColor"
                            aria-hidden="true"
                          >
                            <path
                              fill-rule="evenodd"
                              d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z"
                              clip-rule="evenodd"
                            />
                          </svg>
                          <a href="#"
                            ><span class="ml-2 w-0 flex-1 truncate"
                              >Vehicle Details</span
                            ></a
                          >
                        </div>
                        <div class="ml-4 flex-shrink-0">
                          <a
                            href="{{url_for('static',filename='img/Ambulance.gif')}}"
                            id="download1"
                            download
                            class="font-medium text-indigo-600 hover:text-indigo-500"
                            >Download</a
                          >
                        </div>
                      </li>
                      <li
                        class="flex items-center justify-between py-3 pl-3 pr-4 text-sm"
                      >
                        <div class="flex w-0 flex-1 items-center">
                          <!-- Heroicon name: mini/paper-clip -->
                          <svg
                            class="h-5 w-5 flex-shrink-0 text-gray-400"
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 20 20"
                            fill="currentColor"
                            aria-hidden="true"
                          >
                            <path
                              fill-rule="evenodd"
                              d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z"
                              clip-rule="evenodd"
                            />
                          </svg>
                          <span class="ml-2 w-0 flex-1 truncate"
                            >Vehicle Photo</span
                          >
                        </div>
                        <div class="ml-4 flex-shrink-0">
                          <a
                            href="#"
                            class="font-medium text-indigo-600 hover:text-indigo-500"
                            >Download</a
                          >
                        </div>
                      </li>
                    </ul>
                  </dd>
                </div>
              </dl>
            </div>
            <div
              class="p-4 flex flex-col content-center justify-center md:flex-row gap-10"
            >
              <button
                onclick=""
                class="bg-transparent w-32 h-14 hover:bg-red-500 text-red-700 font-semibold hover:text-white py-2 px-4 border border-red-500 hover:border-transparent rounded"
              >
                Delete
              </button>

              <button
                onclick="okk()"
                class="bg-transparent w-32 h-14 hover:bg-green-500 text-green-700 font-semibold hover:text-white py-2 px-4 border border-green-500 hover:border-transparent rounded"
              >
                Ok
              </button>
            </div>
          </div>
        </div>
      </div>
      <div
        class="mt-14   md:mx-5 flex flex-col md:flex-row gap-5 "
        id="user_info"
      >
        <div class="mt-4  md:ml-60 " id="new_user">
          <h1 class="font-medium text-xl  text-gray-800 flex justify-center m-5  ">User Connect</h1>
          <div class="flex flex-col">
            <div class="-my-2 overflow-x-auto">
              <div class="py-2 align-middle inline-block min-w-full">
                <div
                  class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg bg-white"
                >
                  <table class="divide-y divide-gray-200">
                    <thead>
                      <tr>
                        <th
                          class="px-6 py-3 bg-gray-50 text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"
                        >
                          <div class="flex cursor-pointer">
                            <span class="mr-2">Email</span>
                          </div>
                        </th>
                        <th
                          class="px-6 py-3 bg-gray-50 text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"
                        >
                          <div class="flex cursor-pointer">
                            <span class="mr-2">Vehicle No</span>
                          </div>
                        </th>
                        <th
                          class="px-6 py-3 bg-gray-50 text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"
                        >
                          <div class="flex cursor-pointer">
                            <span class="mr-2">STATUS</span>
                          </div>
                        </th>
                        <th
                          class="px-6 py-3 bg-gray-50 text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"
                        >
                          <div class="flex cursor-pointer">
                            <span class="mr-2">ACTION</span>
                          </div>
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      class="bg-white divide-y divide-gray-200 overflow-auto overflow-y-auto"
                    >
                      {% for i in data %}
                      <tr>
                        <td
                          class="px-6 py-4 whitespace-no-wrap text-sm leading-5"
                        >
                          <p>{{ i.email }}</p>
                          <p class="text-xs text-gray-400"></p>
                        </td>
                        <td
                          class="px-6 py-4 whitespace-no-wrap text-sm leading-5"
                        >
                          <p>{{i. vehicle_no }}</p>
                        </td>
                        <td
                          class="px-6 py-4 whitespace-no-wrap text-sm leading-5"
                        >
                        {% if  i.iot_id==1 %}
                          <div class="flex text-green-500">
                            {% else %}
                            <div class="flex text-red-500">
                            {% endif %}
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              class="w-5 h-5 mr-1"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                              />
                            </svg>
                            <p>Active</p>
                          </div>
                        </td>
                        <td
                          class="px-2 py-4 whitespace-no-wrap text-sm leading-5"
                        >
                          <div class="flex space-x-4">
                            <a
                              href="/give_no/{{i['vehicle_no']}}"
                              class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-2 border border-blue-500 hover:border-transparent rounded"
                              >
                             
                              <p>Assign</p>
                            </a>
                            <button
                            onclick="okk('{{i['vehicle_no']}}')"
                            class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-2 border border-blue-500 hover:border-transparent rounded"
                          >
                            Detail
                          </button>
                          </div>  
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="mt-4" id="new_user">
          <h1 class="font-medium text-xl  text-gray-800 flex justify-center m-5 ">Assign Iot Device</h1>
                    <div class="flex flex-col">
            <div class="-my-2 overflow-x-auto">
              <div class="py-2 align-middle inline-block min-w-full">
                <div
                  class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg bg-white"
                >
                  <table class="min-w-full divide-y divide-gray-200">
                    <thead>
                      <tr>
                        <th
                          class="px-6 py-3 bg-gray-50 text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"
                        >
                          <div class="flex cursor-pointer">
                            <span class="mr-2">Email</span>
                          </div>
                        </th>
                        <th
                          class="px-6 py-3 bg-gray-50 text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"
                        >
                          <div class="flex cursor-pointer">
                            <span class="mr-2">Vehicle No</span>
                          </div>
                        </th>
                        <th
                          class="px-6 py-3 bg-gray-50 text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"
                        >
                          <div class="flex cursor-pointer">
                            <span class="mr-2">STATUS</span>
                          </div>
                        </th>
                        <th
                          class="px-6 py-3 bg-gray-50 text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider"
                        >
                          <div class="flex cursor-pointer">
                            <span class="mr-2">ACTION</span>
                          </div>
                        </th>
                      </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                      {% for i in data2 %}
                      <tr>
                        <td
                          class="px-6 py-4 whitespace-no-wrap text-sm leading-5"
                        >
                          <p>{{ i.email }}</p>
                          <p class="text-xs text-gray-400"></p>
                        </td>
                        <td
                          class="px-6 py-4 whitespace-no-wrap text-sm leading-5"
                        >
                          <p>{{i. vehicle_no }}</p>
                        </td>
                        <td
                          class="px-6 py-4 whitespace-no-wrap text-sm leading-5"
                        >
                          <div class="flex text-green-500">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              class="w-5 h-5 mr-1"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                              />
                            </svg>
                            <p>Active</p>
                          </div>
                        </td>
                        <td
                          class="px-2 py-4 whitespace-no-wrap text-sm leading-5"
                        >
                          <div class="flex space-x-4">
                            <a
                              href="/assign/{{i['vehicle_no']}} "
                              class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded"
                              >
                              
                              <p>Edit</p>
                            </a>
                            <button
                            onclick="okk('{{i['vehicle_no']}}')"
                            class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-2 border border-blue-500 hover:border-transparent rounded"
                          >Detail
                          </div>
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      fetch("/accident_count")
        .then((response) => response.json())
        .then((json) => {
          if (json.hello >= 0) {
            count = json.hello;
            document.getElementById("accident").innerText = json.hello;
            // alert(json.hello)
          }
        });
      window.setInterval(my, 4000);
      function my() {
        fetch("/accident_count")
          .then((response) => response.json())
          .then((json) => {
            if (json.hello > count) {
              count = json.hello;
              console.log(count);

              document.getElementById("accident").innerText = json.hello;
              alert("accident occur");
              // alert(json.hello)
            }
          });
      }

      fetch("/accident_count_detected")
           .then(res => res.json())
           .then(obj => console.log(obj.hello))
    </script>
    <script>
      const show_data = (x) => {
        let data1 = "sdlkfkj";
        fetch("/user_data/" + x)
          .then((res) => res.json())
          .then((data) => {
            console.log(data);
            y = document.getElementById("full_detail").childNodes;
            console.log((y[1].childNodes[3].innerText = data["first_name"]));
            console.log((y[3].childNodes[3].innerText = data["mobile_no"]));
            console.log((y[5].childNodes[3].innerText = data["email"]));
            console.log((y[7].childNodes[3].innerText = data["address"]));
            var z = data["vehicle_no"];

            let zz = `{{url_for('static',filename='img/` + z + `.png')}}` ;

            console.log((document.getElementById("download1").href = `${zz}`));
          });
      };
       var data_hide=1;
      const okk = (x) => {
        if (document.getElementById("user_info").className == "hidden") {
          console.log("dslkj");
          document.getElementById("user_data").className = "hidden";
          document.getElementById("user_info").className = "mt-14 mx-5 flex flex-col md:flex-row gap-5";
        } else {
          console.log("dsjbk");
          show_data(x);
          document.getElementById("user_data").className = "w-full md:ml-60";
          document.getElementById("user_info").className = "hidden";
        }
      };
    </script>
    </script>
    <script>
      var nav_img_count = 1;
      nav_img = () => {
        if (nav_img_count) {
          document.getElementById("nav_bar").className = " ";
          nav_img_count = 0;
        } else {
          document.getElementById("nav_bar").className = "hidden md:block ";
          nav_img_count = 1;
        }
      };
    </script>
  </body>
</html>
